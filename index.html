<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Charlotte de Villiers GEOG 771</title>
  <link rel="stylesheet" href="stylesheets/styles.css" />
  <link rel="stylesheet" href="https://d19vzq90twjlae.cloudfront.net/leaflet/v0.7.7/leaflet.css" />
  <script src="https://d19vzq90twjlae.cloudfront.net/leaflet/v0.7.7/leaflet.js"></script>
  
  <link rel="stylesheet" href="https://libs.cartocdn.com/cartodb.js/v3/3.15/themes/css/cartodb.css" />
  <script src="https://libs.cartocdn.com/cartodb.js/v3/3.15/cartodb.js"></script>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <!--Image sourced from www.pexels.com-->
    
  <script src='https://api.mapbox.com/mapbox-gl-js/v0.18.0/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v0.18.0/mapbox-gl.css' rel='stylesheet' />
    
	<style>
	.info {
	padding: 0px; // specify the number of pixels
	font: 0px font, sans-serif; // font = font name (e.g., Arial, Helvetica, etc.)
	background: white;
	background: rgba(255,255,255,0.8); // rgba = “alpha coulor space” notation where
	box-shadow: 0 0 15px rgba(0,0,0,0.2); “a” designates opacity (1.0)
	border-radius: 0px;
	}
	.info h4 {
	margin: 0 0 0px;
	color: #000; // colour can be specified either as hex value or rgba
	}
	
	.legend {
	text-align: left;
	line-height: 18px;
	color: #555;
	}
	
	.legend i {
	width: 30px;
	height: 18px;
	float: left;
	margin-right: 8px;
	opacity: 0.7;
	}	
	</style>

  </head>
  <body>
  <style>
    .mapboxgl-popup {
        max-width: 400px;
        font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    }
</style>	
  
    <h1 class="title">
	<img src="images/earth.jpeg" alt="Globe Image" style="width:80px;height:80px;align:middle"> Charlotte de Villiers GEOG 771</h1>
    <p></p>
  </header>
  <ul class="tab">
    <li><a href="#" class="tablinks" onclick="openCity(event, 'Prelab')">Prelab</a></li>
    <li><a href="#" class="tablinks" onclick="openCity(event, 'Lab1')">Lab2</a></li>
    <li><a href="#" class="tablinks" onclick="openCity(event, 'Lab2')">Lab3</a></li>
	<li><a href="#" class="tablinks" onclick="openCity(event, 'Lab3')">Lab4</a></li>
  </ul>

  <div id="Prelab" class="tabcontent">
    <h3>Map1</h3>
    <p>This simple interactive digital map was created using the JavaScript map library Leaflet, and GeoJSON</p>
	<div id="mapid" style="margin:auto; width: 1600px; height: 800px"></div>

	<script>

		var mymap = L.map('mapid').setView([-36.866, 174.866], 15);

		L.tileLayer('http://korona.geog.uni-heidelberg.de/tiles/roads/x={x}&y={y}&z={z}', {
			maxZoom: 20,
			attribution: 'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
		}).addTo(mymap);

		var crossfieldreserve = {
      "type": "Feature",
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              174.8669299149788,
              -36.86435798481678,
              0
            ],
            [
              174.866925799622,
              -36.8645871690997,
              0
            ],
            [
              174.8668779927878,
              -36.86476477281445,
              0
            ],
            [
              174.8668627251193,
              -36.86498375071798,
              0
            ],
            [
              174.866797458923,
              -36.86515708859805,
              0
            ],
            [
              174.8666945023803,
              -36.86528744593115,
              0
            ],
            [
              174.866571982679,
              -36.86541923500479,
              0
            ],
            [
              174.8664093224825,
              -36.86548956137122,
              0
            ],
            [
              174.866260094992,
              -36.86554943978371,
              0
            ],
            [
              174.8660226066459,
              -36.86571921144328,
              0
            ],
            [
              174.8657720803125,
              -36.86582865184428,
              0
            ],
            [
              174.8655682513484,
              -36.86586273606422,
              0
            ],
            [
              174.8653038425004,
              -36.86593019016822,
              0
            ],
            [
              174.8651297396424,
              -36.86598640990837,
              0
            ],
            [
              174.8649543818483,
              -36.86605065500861,
              0
            ],
            [
              174.8647073821152,
              -36.86608078188701,
              0
            ],
            [
              174.8644068978143,
              -36.86618628103071,
              0
            ],
            [
              174.8641389577281,
              -36.86629426265295,
              0
            ],
            [
              174.8638686639966,
              -36.86638963123082,
              0
            ],
            [
              174.8635149817383,
              -36.86650947847704,
              0
            ],
            [
              174.8631930124579,
              -36.86658692995363,
              0
            ],
            [
              174.8629752395954,
              -36.86663316309507,
              0
            ],
            [
              174.8627182438445,
              -36.86673296469468,
              0
            ],
            [
              174.862418837357,
              -36.86678168063969,
              0
            ],
            [
              174.862426481115,
              -36.86690981330244,
              0
            ],
            [
              174.8625133410861,
              -36.86704819069033,
              0
            ],
            [
              174.8625996723944,
              -36.86717209412124,
              0
            ],
            [
              174.8626850371351,
              -36.86726699084137,
              0
            ],
            [
              174.8627973257158,
              -36.86734158856266,
              0
            ],
            [
              174.8629238250398,
              -36.86740809926731,
              0
            ],
            [
              174.8631148119697,
              -36.86740308326692,
              0
            ],
            [
              174.8632635609142,
              -36.86743506379391,
              0
            ],
            [
              174.8636670973172,
              -36.86746634069593,
              0
            ],
            [
              174.8640030841481,
              -36.86744419853882,
              0
            ],
            [
              174.8642745180653,
              -36.86745544386917,
              0
            ],
            [
              174.8645233370089,
              -36.86742848016062,
              0
            ],
            [
              174.8647761897948,
              -36.86746736883119,
              0
            ],
            [
              174.8649303799813,
              -36.86747674801002,
              0
            ],
            [
              174.8651552966804,
              -36.86751307928954,
              0
            ],
            [
              174.865307114355,
              -36.86752264391352,
              0
            ],
            [
              174.8655429262061,
              -36.86757352605797,
              0
            ],
            [
              174.8656218562708,
              -36.86755999525881,
              0
            ],
            [
              174.8657357820293,
              -36.86756032564576,
              0
            ],
            [
              174.865881500439,
              -36.86742457196058,
              0
            ],
            [
              174.8661284017959,
              -36.86731646642713,
              0
            ],
            [
              174.8663404746827,
              -36.86722935637508,
              0
            ],
            [
              174.8665925317914,
              -36.86712586334338,
              0
            ],
            [
              174.8668190118953,
              -36.86699320379184,
              0
            ],
            [
              174.8671751412936,
              -36.86687284744306,
              0
            ],
            [
              174.8673610980361,
              -36.86675254490898,
              0
            ],
            [
              174.8675981765231,
              -36.86666547757704,
              0
            ],
            [
              174.8677805265008,
              -36.86652788954186,
              0
            ],
            [
              174.8679816818684,
              -36.86644506504882,
              0
            ],
            [
              174.8680619794977,
              -36.86623033020958,
              0
            ],
            [
              174.8680566175022,
              -36.86609125919541,
              0
            ],
            [
              174.8682213663285,
              -36.86597006826593,
              0
            ],
            [
              174.8683703440917,
              -36.86584361117441,
              0
            ],
            [
              174.8683519611337,
              -36.8656603320274,
              0
            ],
            [
              174.8683009073892,
              -36.86527628894012,
              0
            ],
            [
              174.868118490165,
              -36.86486336258377,
              0
            ],
            [
              174.8679678206819,
              -36.86433484970053,
              0
            ],
            [
              174.8679452051208,
              -36.86411151983538,
              0
            ],
            [
              174.867862900842,
              -36.86405458911491,
              0
            ],
            [
              174.8668940759987,
              -36.86419793084768,
              0
            ],
            [
              174.8669299149788,
              -36.86435798481678,
              0
            ]
          ]
        ]
		}
      };
	  
L.geoJson(crossfieldreserve, {
	color: "#ff6600", fillOpacity: "0.6"}
).addTo(mymap);

L.marker([-36.867, 174.865]).addTo(mymap);

var popup = L.popup()
    .setLatLng([-36.866, 174.865])
    .setContent('<p><i>Crossfield Reserve : )</i></p>')
    .openOn(mymap);

	</script>
  </div>

<div id="Lab1" class="tabcontent" style="display:none">
    <h3>Map2</h3>
    <p>This time-series web map of road collisions involving cyclists was created using Carto</p>
	<div id="map2" style="margin:auto; width: 1600px; height: 800px">
	<iframe width="100%" height="100%" frameborder="0" src="https://cdev882.carto.com/viz/5e9e00c6-5dd3-11e6-8f99-0e98b61680bf/embed_map" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>
	</div>
	<script>
	//window.onload = function() {
	//	cartodb.createVis('map2', 'https://cdev882.carto.com/api/v2/viz/5e9e00c6-5dd3-11e6-8f99-0e98b61680bf/viz.json');
	//}
	//</script>
  </div>

  <div id="Lab2" style="margin:auto;" class="tabcontent" style="display:none">
    <h3>Map3</h3>
    <p>These interactive maps, displaying nine hiking tracks known as New Zealand's "Great Walks", were created using Mapbox studio and data from LINZ 2016.The first was produced using only Mapbox studio, while the second incorporates the use of the Mapbox GL JS API, which allows more customization for the user.</p>
    <p>For the second map, click once on a marker to zoom in, and again to display the popup.</p>
    <div id='map3'  style='width: 500px; height: 500px;  display: inline-block;'></div>
    <script>	
    mapboxgl.accessToken = 'pk.eyJ1IjoiY2Rldjg4MiIsImEiOiJjaXJ3cnlvb3cwMDB4MnpvZjl4d283bmp6In0.k71TZCIS-YdxGMDq41-Yzg';
    	var map3 = new mapboxgl.Map({
	container: 'map3',
	style: 'mapbox://styles/cdev882/cis6sqjgp000igslwrlddw15t',
	center: [-185.808673, -41.231808],
	zoom: 4
	});
    </script>
    
    
    
<div id='maphi' style='width: 500px; height: 500px; display: inline-block;'></div>
<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiY2Rldjg4MiIsImEiOiJjaXJ3cnlvb3cwMDB4MnpvZjl4d283bmp6In0.k71TZCIS-YdxGMDq41-Yzg';
	var maphi = new mapboxgl.Map({
	container: 'maphi',
	style: 'mapbox://styles/cdev882/cisi2r5bi002n2xv0s2q3eikw',
	center: [-185.808673, -41.231808], // starting position
    zoom: 4 // starting zoom
	
	});

	
maphi.on('load', function () {

    maphi.addSource('greatwalks', {
        type: 'vector',
        url: 'cdev882.8d5u940w'
    });
    maphi.addLayer({
        id: 'greatwalksid',
        type: 'fill',
        source: 'greatwalks',
        'source-layer': 'greatwalksid',
        paint: {
            'fill-color': 'rgba(61,153,80,0.55)'
        }
    });

	
	maphi.addSource("markers", { // id / name of the source – user defined, but ‘markers’ makes sense
	"type": "geojson",
	"data": {
	  "type": "FeatureCollection",
	  "features": [
			{
		  "type": "Feature",
		  "properties": {
			"marker-symbol": "marker-pink",
			"title": "Round the Mountain Track"
		  },
		  "geometry": {
			"type": "Point",
			"coordinates": [
			  175.53955078125,
			  -39.334297429807236
			]
		  }
		},
		{
		  "type": "Feature",
		  "properties": {
			"marker-symbol": "marker-pink",
			"title": "Whanganui River"
		  },
		  "geometry": {
			"type": "Point",
			"coordinates": [
			  175.1385498046875,
			  -39.724088577333696
			]
		  }
		},
		{
		  "type": "Feature",
		  "properties": {
			"marker-symbol": "marker-pink",
			"title": "Lake Waikaremoana Great Walk"
		  },
		  "geometry": {
			"type": "Point",
			"coordinates": [
			  177.00073242187497,
			  -38.81403111409756
			]
		  }
		},
		{
		  "type": "Feature",
		  "properties": {
			"marker-symbol": "marker-pink",
			"title": "Abel Tasman Coast Track"
		  },
		  "geometry": {
			"type": "Point",
			"coordinates": [
			  173.0466,
			  -40.8883
			]
		  }
		},
		{
		  "type": "Feature",
		  "properties": {
			"marker-symbol": "marker-pink",
			"title": "Heaphy Track"
		  },
		  "geometry": {
			"type": "Point",
			"coordinates": [
			  172.1612548828125,
			  -40.91766362458113
			]
		  }
		},
		{
		  "type": "Feature",
		  "properties": {
			"marker-symbol": "marker-pink",
			"title": "Routeburn Track"
		  },
		  "geometry": {
			"type": "Point",
			"coordinates": [
			  168.17596435546875,
			  -44.73112559264325
			]
		  }
		},
		{
		  "type": "Feature",
		  "properties": {
			"marker-symbol": "marker-pink",
			"title": "Milford Track"
		  },
		  "geometry": {
			"type": "Point",
			"coordinates": [
			  167.79144287109375,
			  -44.828604269555676
			]
		  }
		},
		{
		  "type": "Feature",
		  "properties": {
			"marker-symbol": "marker-pink",
			"title": "Kepler Track"
		  },
		  "geometry": {
			"type": "Point",
			"coordinates": [
			  167.62115478515625,
			  -45.39266395850031
			]
		  }
		},
		{
		  "type": "Feature",
		  "properties": {
			"marker-symbol": "marker-pink",
			"title": "Rakiura Track"
		  },
		  "geometry": {
			"type": "Point",
			"coordinates": [
			  168.0583,
			  -46.8638
			]
      }
    }
  ]
}
	});
	
	maphi.addLayer({
	"id": "markers", // name of your new layer
	"type": "symbol",
	"source": "markers", // id / name of the geojson source you added above
	"layout": {
		"icon-image": "marker-pink", // *see detailed comments in window below
		"text-field": "{title}",
		"text-font": ["Open Sans Semibold", "Arial Unicode MS Bold"],
		"text-offset": [0, 0.5],
		"text-size": 10,
		"text-anchor": "top" 
	}
	});

});

maphi.on('mousemove', function (e) {
	var features = maphi.queryRenderedFeatures(e.point, { layers: ['markers'] });
	maphi.getCanvas().style.cursor = features.length ? 'pointer' : '';
});

maphi.on('click', function (e) {
	var features = maphi.queryRenderedFeatures(e.point, { layers: ['markers'] });
	if (features.length) {
		maphi.flyTo({center: features[0].geometry.coordinates, zoom: 10});
		var popup = new mapboxgl.Popup()
			.setLngLat(features[0].geometry.coordinates)
			.setHTML(features[0].properties.title)
			.addTo(maphi);	
}

});
</script>
</div>
  <div id="Lab3" class="tabcontent" style="display:none">
    <h3>Map4</h3>
    <p>This interactive hexbin map shows the density of structural fires in Auckland over a period of 36 months between January 2013 - June 30 2016</p>
	<div id="map4" style="width: 800px; height: 600px"></div>
<script type="text/javascript" src="javascripts/firesHexGeoJSON.js"></script>
	<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
	var map4 = L.map('map4').setView([-36.91528, 174.8944], 10);
		L.geoJson(hex).addTo(map4);
		L.tileLayer('http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png', {
		maxZoom: 18,
		attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>' +
					'|Imagery © <a href="http://mapbox.com">Mapbox</a>' + 
					'|Fire data © <a href=http://www.fire.org.nz/>2016 New Zealand</a>',
				id: 'mapboxmapbox.streets'
			}).addTo(map4);

		
		var geojson;
// event listeners go here – see next steps

		function highlightFeature(e) { // (e) = event
			var layer = e.target;
			layer.setStyle({ // you must change the default style
			weight: 5,
			color: '#666',
			dashArray: '',
			fillOpacity: 0.7
			});
			if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
			layer.bringToFront();
			}
			info.update(layer.feature.properties);
		}

		function resetHighlight(e) {
			geojson.resetStyle(e.target);
			info.update();
		}
		
		function onEachFeature(feature, layer) {
			layer.on({
			mouseover: highlightFeature, 
			mouseout: resetHighlight,
			});
		}
		
		L.geoJson(hex, {style: style}).addTo(map4);
		
		geojson = L.geoJson(hex, {style: style, onEachFeature:onEachFeature}).addTo(map4)
		
		
		function style(feature) {
			return {
			fillColor: getColor(feature.properties.PNTCNT),
			weight: 2,
			opacity: 1,
			color: 'white',
			fillOpacity: 0.7
			};
		}
		
		function getColor(d) {
			return d >= 60 ? '#94005b' :
			d >= 30 ? '#aa1523' :
			d >= 25 ? '#c11523' :
			d >= 17 ? '#f14222' :
			d >= 13 ? '#f5602c' :
			d >= 10 ? '#fa7e36' :
			d >= 8 ? '#fd9841' :
			d >= 6 ? '#fdaf4d' :
			d >= 4 ? '#fdc659' :
			d >= 2 ? '#fed973' :
			d >= 1 ? '#feec92' :
			'#d2d2d2';
		}
		
		var info = L.control();
		
		info.onAdd = function (map) {
			this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
			this.update();
			return this._div;
		};
		
		info.update = function (props) {
			this._div.innerHTML = '<h4>Number of structural fires reported:</h4>' + (props ?
			 + props.PNTCNT + ' fires'
			: 'Hover over a hexbin to view');
		};

		info.addTo(map4);
		
		var legend = L.control({position: 'bottomright'});
		legend.onAdd = function (map) {
		var div = L.DomUtil.create('div', 'info legend'),
		grades = [-1,0,2,4,6,8,10,13,17,25,30,60], // these are your class breaks
		key_labels = ["0", "0-2", "2-4","4-6","6-8","8-10","10-13","13-17","17-25","25-30","30-60","60-100"], // what you want your classes labeled
		labels = ["Structural Fire Incidents"],
		from, to;
		// loop through our density intervals and generate a label with a colored square for each interval:
		for (var i = 0; i < grades.length; i++) {
		from = grades[i];
		to = grades[i + 1];
		labels.push(
		'<i style="background:' + getColor(from + 1) + '"></i> ' +
		key_labels[i]);
		}
		div.innerHTML = labels.join('<br>');
		return div;
		};
		legend.addTo(map4);
		
		
	</script>
  </div>
  
  <script>
function openCity(evt, cityName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(cityName).style.display = "block";
    evt.currentTarget.className += " active";
}
</script>
  
</body>
</html>
